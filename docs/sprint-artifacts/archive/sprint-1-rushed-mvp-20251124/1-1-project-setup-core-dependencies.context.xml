<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>1.1</storyId>
    <title>Project Setup &amp; Core Dependencies</title>
    <status>drafted</status>
    <generatedAt>2025-11-18</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/1-1-project-setup-core-dependencies.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>developer</asA>
    <iWant>the project repository initialized with all core dependencies and build configuration</iWant>
    <soThat>I can begin implementing features on a solid foundation</soThat>
    <tasks>
      <task id="1" ac="1">
        <description>Initialize Next.js project with TypeScript and Tailwind</description>
        <subtasks>
          <subtask>Run `npx create-next-app@latest nixtia --typescript --tailwind --app --src-dir --import-alias "@/*"`</subtask>
          <subtask>Verify Next.js 15.x, TypeScript 5.3+, Tailwind 3.4+ versions installed</subtask>
          <subtask>Test development server starts without errors</subtask>
        </subtasks>
      </task>
      <task id="2" ac="2">
        <description>Configure Tailwind with Nixtia brand palette</description>
        <subtasks>
          <subtask>Update tailwind.config.ts with purple-600 (#7c3aed) as primary color</subtask>
          <subtask>Configure slate colors for neutral palette</subtask>
          <subtask>Set base spacing system to 4px units</subtask>
          <subtask>Add custom font configuration for TAN Headline font</subtask>
          <subtask>Verify Tailwind classes compile correctly</subtask>
        </subtasks>
      </task>
      <task id="3" ac="3">
        <description>Install and configure shadcn/ui</description>
        <subtasks>
          <subtask>Run `npx shadcn@latest init` with customized theme</subtask>
          <subtask>Configure components.json with Nixtia color tokens</subtask>
          <subtask>Install initial base components (button, card, input)</subtask>
          <subtask>Verify components render with correct styling</subtask>
        </subtasks>
      </task>
      <task id="4" ac="4">
        <description>Setup code quality tooling</description>
        <subtasks>
          <subtask>Configure ESLint with Next.js recommended rules</subtask>
          <subtask>Setup Prettier with consistent formatting rules</subtask>
          <subtask>Add VSCode settings.json for format-on-save</subtask>
          <subtask>Create npm scripts for linting and formatting</subtask>
          <subtask>Test linting and formatting commands work</subtask>
        </subtasks>
      </task>
      <task id="5" ac="5">
        <description>Initialize Git repository</description>
        <subtasks>
          <subtask>Run `git init` if not already initialized</subtask>
          <subtask>Verify .gitignore includes node_modules, .next, .env.local</subtask>
          <subtask>Create initial commit with base project structure</subtask>
        </subtasks>
      </task>
      <task id="6" ac="6">
        <description>Create environment variable template</description>
        <subtasks>
          <subtask>Create .env.example with placeholders for: NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY, SUPABASE_SERVICE_ROLE_KEY, STRIPE_SECRET_KEY, NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</subtask>
          <subtask>Add comments explaining each variable's purpose</subtask>
          <subtask>Document environment setup in README</subtask>
        </subtasks>
      </task>
      <task id="7" ac="7">
        <description>Write comprehensive README</description>
        <subtasks>
          <subtask>Document project overview and tech stack</subtask>
          <subtask>Add prerequisites (Node.js 20.x, npm 10.x)</subtask>
          <subtask>Write step-by-step setup instructions</subtask>
          <subtask>Include development server start commands</subtask>
          <subtask>Add link to architecture documentation</subtask>
        </subtasks>
      </task>
      <task id="8" ac="9">
        <description>Create basic "Hello Nixtia" page</description>
        <subtasks>
          <subtask>Update src/app/page.tsx with branded welcome message</subtask>
          <subtask>Apply Tailwind classes using configured purple palette</subtask>
          <subtask>Add Next.js Image component with placeholder</subtask>
          <subtask>Verify responsive styling works on mobile viewport</subtask>
        </subtasks>
      </task>
      <task id="9" ac="8,9">
        <description>Testing and verification</description>
        <subtasks>
          <subtask>Run `npm run dev` and verify server starts on port 3000</subtask>
          <subtask>Open localhost:3000 and confirm page renders</subtask>
          <subtask>Run `npm run lint` and verify no errors</subtask>
          <subtask>Run `npm run build` and verify production build succeeds</subtask>
          <subtask>Test hot reload by making a change to page.tsx</subtask>
        </subtasks>
      </task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="1">Next.js 14+ app directory structure initialized with TypeScript and src/ directory</criterion>
    <criterion id="2">Tailwind CSS configured with Nixtia purple brand palette (#7c3aed as primary color)</criterion>
    <criterion id="3">shadcn/ui installed and configured with customized theme matching brand colors</criterion>
    <criterion id="4">ESLint and Prettier configured with agreed code style and auto-formatting</criterion>
    <criterion id="5">Git repository initialized with proper .gitignore for Next.js projects</criterion>
    <criterion id="6">.env.example file created with placeholder values for future integrations</criterion>
    <criterion id="7">README.md with setup instructions and project overview</criterion>
    <criterion id="8">Development server runs successfully with `npm run dev` command</criterion>
    <criterion id="9">Root route (/) renders a basic "Hello Nixtia" page confirming setup works</criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/solutioning/architecture.md</path>
        <title>Nixtia - Decision Architecture Document</title>
        <section>Project Initialization</section>
        <snippet>Establishes base architecture with TypeScript, Tailwind CSS, App Router, src/ directory, and @/* import alias. Includes complete command sequence for Next.js 15, shadcn/ui, Supabase, and all core dependencies.</snippet>
      </doc>
      <doc>
        <path>docs/solutioning/architecture.md</path>
        <title>Nixtia - Decision Architecture Document</title>
        <section>Technology Stack Details</section>
        <snippet>Next.js 15 App Router with React Server Components by default, Client Components where needed. Tailwind CSS with shadcn/ui for WCAG AA accessible components. Supabase backend with PostgreSQL, Auth, and Storage.</snippet>
      </doc>
      <doc>
        <path>docs/solutioning/architecture.md</path>
        <title>Nixtia - Decision Architecture Document</title>
        <section>Project Structure</section>
        <snippet>File-system structure with src/app/ for Next.js 15 App Router, src/components/ui/ for shadcn/ui components, src/lib/ for utilities, src/hooks/ for custom hooks, src/types/ for TypeScript definitions.</snippet>
      </doc>
      <doc>
        <path>docs/solutioning/architecture.md</path>
        <title>Nixtia - Decision Architecture Document</title>
        <section>Naming Conventions</section>
        <snippet>React Components: PascalCase with .tsx extension. Utility files: camelCase with .ts extension. API routes: lowercase with route.ts. TypeScript strict mode enabled.</snippet>
      </doc>
      <doc>
        <path>docs/solutioning/architecture.md</path>
        <title>Nixtia - Decision Architecture Document</title>
        <section>Development Environment</section>
        <snippet>Prerequisites: Node.js 20.x LTS, npm 10.x, Git 2.x. VSCode recommended with ESLint, Prettier, Prisma, Tailwind CSS IntelliSense extensions. Format-on-save enabled.</snippet>
      </doc>
      <doc>
        <path>docs/solutioning/architecture.md</path>
        <title>Nixtia - Decision Architecture Document</title>
        <section>ADR-001: Choose Next.js App Router over Pages Router</section>
        <snippet>Server Components reduce bundle size, streaming and Suspense for better loading states, built-in layouts and error boundaries, better performance for SEO pages, future-proof.</snippet>
      </doc>
      <doc>
        <path>docs/solutioning/architecture.md</path>
        <title>Nixtia - Decision Architecture Document</title>
        <section>ADR-003: Use shadcn/ui instead of pre-built component library</section>
        <snippet>Full control over component code (copy-paste, not npm install), Tailwind CSS integration, WCAG AA accessible by default (elder-friendly requirement), highly customizable for purple brand colors.</snippet>
      </doc>
      <doc>
        <path>docs/planning/epics/epic-1-foundation-infrastructure.md</path>
        <title>Epic 1: Foundation &amp; Infrastructure</title>
        <section>Story 1.1: Project Setup &amp; Core Dependencies</section>
        <snippet>Foundation story with no direct user value. Establishes Next.js for SSR/SSG (SEO requirements), Tailwind configured with purple-600 (#7c3aed), shadcn/ui for accessible component foundation, TypeScript for type safety, base spacing system: 4px.</snippet>
      </doc>
      <doc>
        <path>docs/planning/ux-design-specification/1-design-system-foundation.md</path>
        <title>Design System Foundation</title>
        <section>Design System Choice</section>
        <snippet>shadcn/ui selected for highly customizable, WCAG 2.1 AA compliant, Tailwind-based components. Mobile-first design for 80% mobile traffic. Radix UI primitives underneath provide industry-leading accessibility.</snippet>
      </doc>
      <doc>
        <path>docs/planning/ux-design-specification/9-implementation-guidance.md</path>
        <title>Implementation Guidance</title>
        <section>Handoff to Development</section>
        <snippet>Install shadcn/ui with Tailwind CSS, configure Tailwind theme with Nixtia color palette, install TAN Headline font, set up base spacing/typography/breakpoints. Design QA checklist includes WCAG AA contrast, 44x44px touch targets, keyboard navigation.</snippet>
      </doc>
      <doc>
        <path>docs/planning/PRD/non-functional-requirements.md</path>
        <title>Non-Functional Requirements</title>
        <section>Performance</section>
        <snippet>Product catalog loads &lt; 2s on mobile 4G, cart updates &lt; 200ms. Image assets served via CDN with optimization. Supabase connection pooling configured. Static assets cached with aggressive browser cache headers.</snippet>
      </doc>
      <doc>
        <path>docs/planning/PRD/non-functional-requirements.md</path>
        <title>Non-Functional Requirements</title>
        <section>Security</section>
        <snippet>All traffic served over HTTPS. Environment variables for API keys and secrets (never in code). Input validation to prevent XSS attacks. Session tokens use secure, httpOnly cookies.</snippet>
      </doc>
    </docs>
    <code>
      <!-- No existing code - this is a greenfield project initialization story -->
    </code>
    <dependencies>
      <node>
        <package name="next" version="15.x" reason="Core framework for SSR/SSG and App Router" />
        <package name="react" version="19.x" reason="UI library with Server Components support" />
        <package name="typescript" version="5.3+" reason="Type safety across the stack" />
        <package name="tailwindcss" version="3.4+" reason="Utility-first CSS framework, required by shadcn/ui" />
        <package name="@supabase/supabase-js" version="latest" reason="Supabase client for backend integration" />
        <package name="@supabase/auth-helpers-nextjs" version="latest" reason="Next.js auth integration helpers" />
        <package name="zod" version="3.x" reason="Type-safe schema validation" />
        <package name="react-hook-form" version="7.x" reason="Performance-optimized form management" />
        <package name="@hookform/resolvers" version="latest" reason="Validation resolver for react-hook-form + zod" />
        <package name="recharts" version="2.x" reason="React-first charting library for analytics" />
        <package name="date-fns" version="3.x" reason="Lightweight date utilities" />
        <package name="react-phone-number-input" version="latest" reason="Phone input with country code selector" />
        <package name="stripe" version="latest" reason="Payment processing (server-side)" />
        <package name="@stripe/stripe-js" version="latest" reason="Stripe client library" />
      </node>
      <devDependencies>
        <package name="eslint" version="8.x" reason="Code linting and quality" />
        <package name="prettier" version="3.x" reason="Code formatting" />
        <package name="@types/node" version="latest" reason="TypeScript definitions for Node.js" />
        <package name="@types/react" version="latest" reason="TypeScript definitions for React" />
      </devDependencies>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>Use Next.js App Router (not Pages Router) per ADR-001 - all pages in src/app/ directory with page.tsx convention</constraint>
    <constraint>TypeScript strict mode must be enabled - no implicit any types allowed</constraint>
    <constraint>All React components use PascalCase naming with .tsx extension</constraint>
    <constraint>shadcn/ui components must be installed via CLI and placed in src/components/ui/ directory</constraint>
    <constraint>Tailwind CSS is the only styling solution - no CSS modules or styled-components</constraint>
    <constraint>Primary brand color must be purple-600 (#7c3aed) configured in tailwind.config.ts</constraint>
    <constraint>Import alias @/* must be configured for all src/ directory imports</constraint>
    <constraint>Environment variables for secrets stored in .env.local (gitignored), template in .env.example</constraint>
    <constraint>Git repository must exclude node_modules/, .next/, .env.local in .gitignore</constraint>
    <constraint>Development server must run on default port 3000 with npm run dev</constraint>
    <constraint>ESLint must use Next.js recommended rules with no errors on initial setup</constraint>
    <constraint>Prettier must be configured for consistent formatting with VSCode format-on-save</constraint>
    <constraint>README must include prerequisites (Node.js 20.x, npm 10.x) and setup instructions</constraint>
    <constraint>Base spacing system: 4px units (Tailwind default) per UX Design specification</constraint>
    <constraint>WCAG AA accessibility baseline - all components must meet color contrast and keyboard navigation requirements</constraint>
  </constraints>

  <interfaces>
    <!-- No existing interfaces - this story creates the foundation -->
  </interfaces>

  <tests>
    <standards>
      This is the foundation story establishing the testing infrastructure for future stories. Testing frameworks will be configured in subsequent stories. For this story, manual verification is required:
      - Development server starts without errors (npm run dev)
      - Production build succeeds (npm run build)
      - ESLint runs without errors (npm run lint)
      - Basic page renders at localhost:3000
      - Hot reload works when editing page.tsx

      Future stories will add:
      - Vitest for unit tests (tests/unit/)
      - Playwright for E2E tests (tests/e2e/)
      - Component testing patterns
    </standards>
    <locations>
      <location>Manual verification via browser and command line for this foundation story</location>
      <location>Future: tests/unit/ for component and utility tests</location>
      <location>Future: tests/e2e/ for end-to-end user journey tests</location>
    </locations>
    <ideas>
      <idea ac="1">Verify package.json contains correct Next.js, React, TypeScript, Tailwind versions</idea>
      <idea ac="2">Check tailwind.config.ts includes purple-600 (#7c3aed) in theme.extend.colors</idea>
      <idea ac="3">Verify components.json exists and shadcn/ui components install successfully</idea>
      <idea ac="4">Run eslint and prettier commands to verify configuration works</idea>
      <idea ac="5">Check .gitignore includes node_modules, .next, .env.local entries</idea>
      <idea ac="6">Verify .env.example contains all required environment variable placeholders</idea>
      <idea ac="7">Review README.md includes prerequisites and step-by-step setup instructions</idea>
      <idea ac="8">Execute npm run dev and verify server starts on port 3000 without errors</idea>
      <idea ac="9">Navigate to localhost:3000 and verify "Hello Nixtia" page renders with purple branding</idea>
    </ideas>
  </tests>
</story-context>
